import XCTest
@testable import ActionBuilderCore

struct MockRepo: Repo {
    let owner = "testOwner"
    let name = "testRepo"
    let workflow = "Tests"
    var settings: ActionBuilderCore.Settings

    init(_ options: [String]) {
        settings = Settings(options: options)
    }
    
}

final class ActionBuilderCoreTests: XCTestCase {
    func testGenerator() {
        let expected = """
            # --------------------------------------------------------------------------------
            # This workflow was automatically generated by Test Generator 1.2.3 (456).
            # (see https://test.com for more details)
            # --------------------------------------------------------------------------------

            name: Tests

            on: [push, pull_request]

            jobs:
            
            """
        
        let generator = Generator(name: "Test Generator", version: "1.2.3 (456)", link: "https://test.com")
        let repo = MockRepo([])
        
        let output = generator.workflow(for: repo)!
        XCTAssertEqual(output.source, expected)
    }
    
}
